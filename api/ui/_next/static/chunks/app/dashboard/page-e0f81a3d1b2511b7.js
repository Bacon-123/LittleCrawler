(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5877:function(e,t,s){Promise.resolve().then(s.bind(s,441))},441:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return ew}});var a=s(7437),r=s(2265),l=s(9376),n=s(8712),i=s(5035),o=s(8804),c=s(6290),d=s(9871),h=s(7501),x=s(7032),m=s(3649),g=s(9365),u=s(5455),p=s(9008),w=s(7847),b=s(9409),j=s(7985),f=s(6632),v=s(7718),y=s(3168),N=s(4555),C=s(941),S=s(7752),k=s(134),D=s(4294),P=s(8793),Z=s(4087),L=s(4362),I=s(713),E=s(1239),O=s(2926),z=s(5395),R=s(4401),T=s(5929),A=s(7226),_=s(875),F=s(2369),J=s(8728),M=s(7692),W=s(1094),U=s(3276),q=s(1769),V=s(2718),B=s(3247),G=s(2208),Q=s(7404),X=s(3388),H=s(8166),K=s(7342),Y=s(1649),$=s(4428),ee=s(9547),et=s(9277),es=s(91),ea=s(7168),er=s(5868),el=s(2735),en=s(6362),ei=s(221),eo=s(9227),ec=s(8930),ed=s(4440),eh=s(7416),ex=s(8867),em=s(5922),eg=s(1837);let eu=e=>{try{let t=new Date(e);if(isNaN(t.getTime())){let s=e.replace(" ","T");t=new Date(s)}if(isNaN(t.getTime())){let t=e.match(/\d{2}:\d{2}:\d{2}/);return t?t[0]:e}return t.toLocaleTimeString()}catch(t){return e}},ep={INFO:"text-cyan-400",WARNING:"text-yellow-400",ERROR:"text-red-400",DEBUG:"text-gray-400"};function ew(){var e,t;let{user:s,token:ew,logout:eb}=(0,L.a)(),{t:ej,locale:ef,setLocale:ev}=(0,I.Q)(),{theme:ey,setTheme:eN}=(0,em.F)(),eC=(0,l.useRouter)(),[eS,ek]=(0,r.useState)("xhs"),[eD,eP]=(0,r.useState)("search"),[eZ,eL]=(0,r.useState)("qrcode"),[eI,eE]=(0,r.useState)("json"),[eO,ez]=(0,r.useState)(""),[eR,eT]=(0,r.useState)(""),[eA,e_]=(0,r.useState)(!1),[eF,eJ]=(0,r.useState)(!1),[eM,eW]=(0,r.useState)(!1),[eU,eq]=(0,r.useState)(null),[eV,eB]=(0,r.useState)([]),[eG,eQ]=(0,r.useState)(!1),[eX,eH]=(0,r.useState)(!1),[eK,eY]=(0,r.useState)(!1),e$=(0,r.useRef)(null),e0=(0,r.useRef)(null),[e4,e1]=(0,r.useState)([]),[e5,e2]=(0,r.useState)(!1),[e3,e7]=(0,r.useState)(0),e8=(0,r.useCallback)(()=>{!eG&&e$.current&&e$.current.scrollIntoView({behavior:"smooth"})},[eG]);(0,r.useEffect)(()=>{e8()},[eV,e8]),(0,r.useEffect)(()=>{let e=localStorage.getItem("token");if(!e)return;let t=()=>{let s=new WebSocket("".concat((0,eg.BQ)(),"/api/ws/logs?token=").concat(e));e0.current=s,s.onopen=()=>{eY(!0),e6("WebSocket 连接已建立")},s.onmessage=e=>{try{if("ping"===e.data){s.send("pong");return}if("pong"===e.data)return;let r=JSON.parse(e.data);if(r.message){var t,a;let e={id:(null===(t=r.id)||void 0===t?void 0:t.toString())||Date.now().toString()+Math.random(),timestamp:r.timestamp||new Date().toISOString(),level:(null===(a=r.level)||void 0===a?void 0:a.toUpperCase())||"INFO",message:r.message||""};eB(t=>[...t.slice(-500),e])}}catch(t){"ping"!==e.data&&"pong"!==e.data&&console.error("解析日志失败",t)}},s.onclose=()=>{eY(!1),e6("WebSocket 连接已断开，5秒后重连..."),setTimeout(t,5e3)},s.onerror=()=>{eY(!1)}};return t(),()=>{e0.current&&e0.current.close()}},[]);let e6=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"INFO";eB(s=>[...s.slice(-500),{id:Date.now().toString(),timestamp:new Date().toISOString(),level:t,message:"[System] ".concat(e)}])};(0,r.useEffect)(()=>{if(!ew)return;let e=async()=>{try{let e=await eg.Z9.getStatus(ew);eq(e),eW("running"===e.status||"stopping"===e.status)}catch(e){console.error("获取状态失败",e)}};e();let t=setInterval(e,3e3);return()=>clearInterval(t)},[ew]);let e9=async()=>{if(ew){e2(!0);try{let e=(await eg.Bl.getFiles(ew,eS,"json")).files||[];if(e.length>0){let t=e.find(e=>e.name.includes("contents"))||e[0],s=await eg.Bl.getFileContent(ew,t.path,10);e1(s.data||[]),e7(s.total||0)}else e1([]),e7(0)}catch(e){console.error("加载数据失败",e),e1([]),e7(0)}finally{e2(!1)}}};(0,r.useEffect)(()=>{ew&&e9()},[eS,ew]),(0,r.useEffect)(()=>{if(!eM||!ew)return;let e=setInterval(e9,5e3);return()=>clearInterval(e)},[eM,ew,eS]);let te=async()=>{if(ew){if(!eR.trim()&&"search"===eD){e6("请输入搜索关键词","WARNING");return}try{e6("开始启动 ".concat(eS," 爬虫...")),await eg.Z9.start(ew,{platform:eS,crawler_type:eD,login_type:eZ,save_option:eI,keywords:eR.trim(),start_page:1,max_pages:eO?parseInt(eO):void 0,enable_comments:!0,headless:eF}),eW(!0),e6("爬虫启动成功！","INFO")}catch(e){e6("启动失败: ".concat(e.message),"ERROR")}}},tt=async()=>{if(ew)try{await eg.Z9.stop(ew),eW(!1),e6("爬虫已停止","WARNING")}catch(e){e6("停止失败: ".concat(e.message),"ERROR")}},ts=e=>{navigator.clipboard.writeText(e)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:[(0,a.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,a.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),(0,a.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-cyan-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-pulse"})]}),(0,a.jsxs)("div",{className:"relative z-10",children:[(0,a.jsx)("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-black/30 border-b border-white/10",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-cyan-400 to-purple-500 flex items-center justify-center",children:(0,a.jsx)(E.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-400 rounded-full border-2 border-slate-900 animate-pulse"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"LittleCrawler"}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"v1.0"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-white/5 border border-white/10",children:eK?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O.Z,{className:"w-4 h-4 text-green-400"}),(0,a.jsx)("span",{className:"text-xs text-green-400",children:ej("common.connected")})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(z.Z,{className:"w-4 h-4 text-red-400"}),(0,a.jsx)("span",{className:"text-xs text-red-400",children:ej("common.disconnected")})]})}),eM&&(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full bg-cyan-500/20 border border-cyan-500/30",children:[(0,a.jsx)(R.Z,{className:"w-4 h-4 text-cyan-400 animate-pulse"}),(0,a.jsx)("span",{className:"text-xs text-cyan-400",children:ej("common.running")})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(n.e,{content:"zh"===ef?"English":"中文",children:(0,a.jsx)(i.A,{isIconOnly:!0,variant:"flat",className:"bg-white/5 hover:bg-white/10",onClick:()=>ev("zh"===ef?"en":"zh"),children:(0,a.jsx)("span",{className:"text-xs font-medium text-gray-300",children:"zh"===ef?"EN":"中"})})}),(0,a.jsx)(n.e,{content:ej("common.theme"),children:(0,a.jsx)(i.A,{isIconOnly:!0,variant:"flat",className:"bg-white/5 hover:bg-white/10",onClick:()=>eN("dark"===ey?"light":"dark"),children:"dark"===ey?(0,a.jsx)(T.Z,{className:"w-4 h-4 text-yellow-400"}):(0,a.jsx)(A.Z,{className:"w-4 h-4 text-gray-400"})})}),(0,a.jsxs)(o.F,{children:[(0,a.jsx)(c.S,{children:(0,a.jsxs)(i.A,{variant:"flat",className:"bg-white/5 hover:bg-white/10 gap-2",children:[(0,a.jsx)(d.h,{size:"sm",name:null==s?void 0:null===(t=s.username)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.toUpperCase(),className:"bg-gradient-to-br from-cyan-400 to-purple-500"}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:null==s?void 0:s.username}),(0,a.jsx)(_.Z,{className:"w-4 h-4 text-gray-400"})]})}),(0,a.jsxs)(h.a,{children:[(0,a.jsx)(x.W,{startContent:(0,a.jsx)(F.Z,{className:"w-4 h-4"}),children:ej("common.profile")},"profile"),(0,a.jsx)(x.W,{startContent:(0,a.jsx)(J.Z,{className:"w-4 h-4"}),children:ej("common.settings")},"settings"),(0,a.jsx)(x.W,{className:"text-danger",color:"danger",startContent:(0,a.jsx)(M.Z,{className:"w-4 h-4"}),onClick:()=>{eb(),eC.push("/login")},children:ej("common.logout")},"logout")]})]})]})]})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-6 space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)(m.w,{className:"lg:col-span-2 bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,a.jsxs)(g.u,{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-cyan-400 to-blue-500 flex items-center justify-center",children:(0,a.jsx)(J.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:ej("dashboard.crawlerConfig")}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:ej("dashboard.configDescription")})]})]}),(0,a.jsx)("div",{className:"flex gap-2",children:eM?(0,a.jsx)(i.A,{color:"danger",variant:"flat",startContent:(0,a.jsx)(W.Z,{className:"w-4 h-4"}),onClick:tt,className:"bg-red-500/20 hover:bg-red-500/30",children:ej("common.stop")}):(0,a.jsx)(i.A,{color:"success",variant:"flat",startContent:(0,a.jsx)(U.Z,{className:"w-4 h-4"}),onClick:te,className:"bg-green-500/20 hover:bg-green-500/30",children:ej("common.start")})})]}),(0,a.jsx)(u.j,{className:"bg-white/10"}),(0,a.jsxs)(p.G,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)(w.g,{label:ej("crawler.platform"),selectedKeys:[eS],onChange:e=>ek(e.target.value),classNames:{trigger:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400"},children:[(0,a.jsx)(b.R,{value:"xhs",startContent:(0,a.jsx)(q.Z,{className:"w-4 h-4 text-red-400"}),children:ej("crawler.platforms.xhs")},"xhs"),(0,a.jsx)(b.R,{value:"zhihu",startContent:(0,a.jsx)(V.Z,{className:"w-4 h-4 text-blue-400"}),children:ej("crawler.platforms.zhihu")},"zhihu")]}),(0,a.jsxs)(w.g,{label:ej("crawler.crawlerType"),selectedKeys:[eD],onChange:e=>eP(e.target.value),classNames:{trigger:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400"},children:[(0,a.jsx)(b.R,{value:"search",startContent:(0,a.jsx)(B.Z,{className:"w-4 h-4 text-cyan-400"}),children:ej("crawler.types.search")},"search"),(0,a.jsx)(b.R,{value:"detail",startContent:(0,a.jsx)(G.Z,{className:"w-4 h-4 text-purple-400"}),children:ej("crawler.types.detail")},"detail"),(0,a.jsx)(b.R,{value:"creator",startContent:(0,a.jsx)(F.Z,{className:"w-4 h-4 text-green-400"}),children:ej("crawler.types.creator")},"creator")]}),(0,a.jsxs)(w.g,{label:ej("crawler.loginType"),selectedKeys:[eZ],onChange:e=>eL(e.target.value),classNames:{trigger:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400"},children:[(0,a.jsx)(b.R,{value:"qrcode",startContent:(0,a.jsx)(Q.Z,{className:"w-4 h-4 text-orange-400"}),children:ej("crawler.loginTypes.qrcode")},"qrcode"),(0,a.jsx)(b.R,{value:"phone",startContent:(0,a.jsx)(X.Z,{className:"w-4 h-4 text-blue-400"}),children:ej("crawler.loginTypes.phone")},"phone"),(0,a.jsx)(b.R,{value:"cookie",startContent:(0,a.jsx)(H.Z,{className:"w-4 h-4 text-yellow-400"}),children:ej("crawler.loginTypes.cookie")},"cookie")]}),(0,a.jsxs)(w.g,{label:ej("data.saveFormat"),selectedKeys:[eI],onChange:e=>eE(e.target.value),classNames:{trigger:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400"},children:[(0,a.jsx)(b.R,{value:"json",startContent:(0,a.jsx)(K.Z,{className:"w-4 h-4 text-yellow-400"}),children:ej("data.formats.json")},"json"),(0,a.jsx)(b.R,{value:"csv",startContent:(0,a.jsx)(Y.Z,{className:"w-4 h-4 text-green-400"}),children:ej("data.formats.csv")},"csv"),(0,a.jsx)(b.R,{value:"sqlite",startContent:(0,a.jsx)($.Z,{className:"w-4 h-4 text-blue-400"}),children:ej("data.formats.sqlite")},"sqlite"),(0,a.jsx)(b.R,{value:"mongodb",startContent:(0,a.jsx)(ee.Z,{className:"w-4 h-4 text-green-500"}),children:ej("data.formats.mongodb")},"mongodb")]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(j.Y,{label:ej("crawler.keywords"),placeholder:ej("crawler.keywordsPlaceholder"),value:eR,onChange:e=>eT(e.target.value),startContent:(0,a.jsx)(B.Z,{className:"w-4 h-4 text-gray-400"}),classNames:{inputWrapper:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400"},className:"md:col-span-2"}),(0,a.jsx)(j.Y,{label:ej("crawler.maxPages"),placeholder:ej("crawler.maxPagesPlaceholder"),description:ej("crawler.maxPagesDescription"),type:"number",min:"1",value:eO,onChange:e=>ez(e.target.value),startContent:(0,a.jsx)(et.Z,{className:"w-4 h-4 text-gray-400"}),classNames:{inputWrapper:"bg-white/5 border-white/10 hover:bg-white/10",label:"text-gray-400",description:"text-gray-500 text-xs"}})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-6",children:[(0,a.jsx)(f.i,{isSelected:eA,onValueChange:e_,classNames:{wrapper:"group-data-[selected=true]:bg-cyan-500"},children:(0,a.jsx)("span",{className:"text-sm text-gray-300",children:ej("crawler.enableProxy")})}),(0,a.jsx)(f.i,{isSelected:eF,onValueChange:eJ,classNames:{wrapper:"group-data-[selected=true]:bg-purple-500"},children:(0,a.jsx)("span",{className:"text-sm text-gray-300",children:ej("crawler.cdpMode")})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(m.w,{className:"bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,a.jsxs)(g.u,{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-purple-400 to-pink-500 flex items-center justify-center",children:(0,a.jsx)(es.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:ej("dashboard.dataStats")}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:ej("dashboard.collectedData")})]})]}),(0,a.jsx)(i.A,{isIconOnly:!0,variant:"flat",size:"sm",onClick:e9,className:"bg-white/5 hover:bg-white/10",children:(0,a.jsx)(ea.Z,{className:"w-4 h-4 text-gray-400 ".concat(e5?"animate-spin":"")})})]}),(0,a.jsx)(u.j,{className:"bg-white/10"}),(0,a.jsxs)(p.G,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"text-5xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:e3.toLocaleString()}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:ej("data.records")})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-cyan-400",children:(null==eU?void 0:eU.notes_count)||0}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:ej("data.notes")})]}),(0,a.jsxs)("div",{className:"bg-white/5 rounded-lg p-3 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-semibold text-purple-400",children:(null==eU?void 0:eU.comments_count)||0}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:ej("data.comments")})]})]}),eM&&(0,a.jsx)(v.W,{size:"sm",isIndeterminate:!0,color:"secondary",className:"max-w-full",classNames:{indicator:"bg-gradient-to-r from-cyan-400 to-purple-500"}})]})]}),(0,a.jsxs)(m.w,{className:"bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,a.jsx)(g.u,{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center",children:(0,a.jsx)(er.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:ej("publish.center")}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:ej("publish.description")})]})]})}),(0,a.jsx)(u.j,{className:"bg-white/10"}),(0,a.jsxs)(p.G,{className:"space-y-3",children:[(0,a.jsxs)(i.A,{className:"w-full justify-start bg-gradient-to-r from-red-500/20 to-pink-500/20 hover:from-red-500/30 hover:to-pink-500/30 border border-red-500/30",variant:"flat",startContent:(0,a.jsx)("div",{className:"w-6 h-6 rounded bg-gradient-to-br from-red-500 to-pink-500 flex items-center justify-center",children:(0,a.jsx)(q.Z,{className:"w-3.5 h-3.5 text-white"})}),onClick:()=>eC.push("/dashboard/publish"),children:[(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-white",children:ej("publish.xhs")}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:ej("publish.xhsDesc")})]}),(0,a.jsx)(y.z,{size:"sm",color:"success",variant:"flat",children:ej("publish.available")})]}),(0,a.jsxs)(i.A,{className:"w-full justify-start bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-500/30 opacity-60 cursor-not-allowed",variant:"flat",isDisabled:!0,startContent:(0,a.jsx)("div",{className:"w-6 h-6 rounded bg-gradient-to-br from-yellow-500 to-orange-500 flex items-center justify-center",children:(0,a.jsx)(ee.Z,{className:"w-3.5 h-3.5 text-white"})}),children:[(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-white",children:ej("publish.xhy")}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:ej("publish.xhyDesc")})]}),(0,a.jsx)(y.z,{size:"sm",color:"default",variant:"flat",children:ej("publish.comingSoon")})]}),(0,a.jsxs)(i.A,{className:"w-full justify-start bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-500/30 opacity-60 cursor-not-allowed",variant:"flat",isDisabled:!0,startContent:(0,a.jsx)("div",{className:"w-6 h-6 rounded bg-gradient-to-br from-blue-500 to-cyan-500 flex items-center justify-center",children:(0,a.jsx)(V.Z,{className:"w-3.5 h-3.5 text-white"})}),children:[(0,a.jsxs)("div",{className:"flex-1 text-left",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-white",children:ej("publish.zhihu")}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:ej("publish.zhihuDesc")})]}),(0,a.jsx)(y.z,{size:"sm",color:"default",variant:"flat",children:ej("publish.comingSoon")})]})]})]})]})]}),(0,a.jsxs)(m.w,{className:"bg-white/5 backdrop-blur-xl border border-white/10",children:[(0,a.jsxs)(g.u,{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-green-400 to-emerald-500 flex items-center justify-center",children:(0,a.jsx)(es.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:ej("dashboard.latestData")}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:ej("dashboard.latestRecords")})]})]}),(0,a.jsxs)(o.F,{children:[(0,a.jsx)(c.S,{children:(0,a.jsx)(i.A,{variant:"flat",size:"sm",startContent:(0,a.jsx)(el.Z,{className:"w-4 h-4"}),className:"bg-white/5 hover:bg-white/10",children:ej("common.export")})}),(0,a.jsxs)(h.a,{children:[(0,a.jsx)(x.W,{children:ej("data.exportJson")},"json"),(0,a.jsx)(x.W,{children:ej("data.exportCsv")},"csv"),(0,a.jsx)(x.W,{children:ej("data.exportExcel")},"excel")]})]})]}),(0,a.jsx)(u.j,{className:"bg-white/10"}),(0,a.jsx)(p.G,{className:"overflow-x-auto",children:e5?(0,a.jsx)("div",{className:"flex justify-center py-8",children:(0,a.jsx)(N.c,{color:"secondary"})}):0===e4.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-400",children:ej("data.noData")}):(0,a.jsxs)(C.b,{"aria-label":ej("dashboard.latestData"),classNames:{wrapper:"bg-transparent shadow-none",th:"bg-white/5 text-gray-300",td:"text-gray-300"},children:[(0,a.jsxs)(S.J,{children:[(0,a.jsx)(k.j,{children:ej("data.title")}),(0,a.jsx)(k.j,{children:ej("data.author")}),(0,a.jsx)(k.j,{children:ej("data.type")}),(0,a.jsx)(k.j,{children:ej("data.likes")}),(0,a.jsx)(k.j,{children:ej("common.actions")})]}),(0,a.jsx)(D.y,{children:e4.map((e,t)=>(0,a.jsxs)(P.g,{children:[(0,a.jsx)(Z.X,{children:(0,a.jsx)("div",{className:"max-w-xs truncate",children:e.title||e.desc||"-"})}),(0,a.jsx)(Z.X,{children:e.nickname||e.user_nickname||"-"}),(0,a.jsx)(Z.X,{children:(0,a.jsx)(y.z,{size:"sm",variant:"flat",className:"bg-white/10",children:"video"===e.type?"视频":"normal"===e.type?"图文":e.type||"note"})}),(0,a.jsx)(Z.X,{children:e.liked_count||0}),(0,a.jsx)(Z.X,{children:(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(n.e,{content:"查看详情",children:(0,a.jsx)(i.A,{isIconOnly:!0,size:"sm",variant:"flat",className:"bg-white/5 hover:bg-white/10",children:(0,a.jsx)(G.Z,{className:"w-3 h-3"})})}),e.note_url&&(0,a.jsx)(n.e,{content:ej("common.openLink"),children:(0,a.jsx)(i.A,{isIconOnly:!0,size:"sm",variant:"flat",className:"bg-white/5 hover:bg-white/10",onClick:()=>window.open(e.note_url,"_blank"),children:(0,a.jsx)(en.Z,{className:"w-3 h-3"})})})]})})]},e.note_id||e.id||t))})]})})]}),(0,a.jsxs)(m.w,{className:"bg-white/5 backdrop-blur-xl border border-white/10 transition-all duration-300 ".concat(eX?"fixed inset-4 z-50":""),children:[(0,a.jsxs)(g.u,{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-orange-400 to-red-500 flex items-center justify-center",children:(0,a.jsx)(ei.Z,{className:"w-4 h-4 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-white",children:ej("dashboard.realtimeLogs")}),(0,a.jsxs)("p",{className:"text-xs text-gray-400",children:[eV.length," ",ej("logs.entries")]})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(i.A,{isIconOnly:!0,size:"sm",variant:"flat",onClick:()=>eQ(!eG),className:"bg-white/5 hover:bg-white/10",children:eG?(0,a.jsx)(U.Z,{className:"w-4 h-4 text-green-400"}):(0,a.jsx)(eo.Z,{className:"w-4 h-4 text-yellow-400"})}),(0,a.jsx)(i.A,{isIconOnly:!0,size:"sm",variant:"flat",onClick:()=>{eB([]),e6("日志已清空")},className:"bg-white/5 hover:bg-white/10",children:(0,a.jsx)(ec.Z,{className:"w-4 h-4 text-gray-400"})}),(0,a.jsx)(i.A,{isIconOnly:!0,size:"sm",variant:"flat",onClick:()=>eH(!eX),className:"bg-white/5 hover:bg-white/10",children:eX?(0,a.jsx)(ed.Z,{className:"w-4 h-4 text-gray-400"}):(0,a.jsx)(eh.Z,{className:"w-4 h-4 text-gray-400"})})]})]}),(0,a.jsx)(u.j,{className:"bg-white/10"}),(0,a.jsx)(p.G,{className:"p-0 ".concat(eX?"h-[calc(100vh-12rem)]":"h-64"),children:(0,a.jsxs)("div",{className:"h-full overflow-y-auto font-mono text-xs p-4 bg-black/30",children:[0===eV.length?(0,a.jsx)("div",{className:"text-gray-500 text-center py-8",children:ej("logs.waiting")}):eV.map(e=>(0,a.jsxs)("div",{className:"flex gap-2 py-0.5 hover:bg-white/5 px-2 -mx-2 rounded group",children:[(0,a.jsx)("span",{className:"text-gray-500 select-none",children:eu(e.timestamp)}),(0,a.jsxs)("span",{className:"font-semibold w-16 ".concat(ep[e.level]),children:["[",e.level,"]"]}),(0,a.jsx)("span",{className:"text-gray-300 flex-1",children:e.message}),(0,a.jsx)(i.A,{isIconOnly:!0,size:"sm",variant:"light",className:"opacity-0 group-hover:opacity-100 transition-opacity h-4 w-4 min-w-4",onClick:()=>ts(e.message),children:(0,a.jsx)(ex.Z,{className:"w-3 h-3 text-gray-400"})})]},e.id)),(0,a.jsx)("div",{ref:e$})]})})]})]}),(0,a.jsx)("footer",{className:"max-w-7xl mx-auto px-4 py-6 text-center text-gray-500 text-sm",children:(0,a.jsx)("p",{children:ej("common.copyright")})})]})]})}},4362:function(e,t,s){"use strict";s.d(t,{H:function(){return i},a:function(){return o}});var a=s(7437),r=s(2265),l=s(1837);let n=(0,r.createContext)(void 0);function i(e){let{children:t}=e,[s,i]=(0,r.useState)(null),[o,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=localStorage.getItem("token");e?(c(e),l.iJ.getCurrentUser(e).then(e=>{i(e)}).catch(()=>{localStorage.removeItem("token"),c(null)}).finally(()=>{h(!1)})):h(!1)},[]);let x=async e=>{let t=await l.iJ.login(e);c(t.access_token),i(t.user),localStorage.setItem("token",t.access_token)};return(0,a.jsx)(n.Provider,{value:{user:s,token:o,isAuthenticated:!!o&&!!s,isLoading:d,login:x,logout:()=>{o&&l.iJ.logout(o).catch(console.error),c(null),i(null),localStorage.removeItem("token")}},children:t})}function o(){let e=(0,r.useContext)(n);if(!e)throw Error("useAuth must be used within AuthProvider");return e}},713:function(e,t,s){"use strict";s.d(t,{b:function(){return o},Q:function(){return c}});var a=s(7437),r=s(2265),l=JSON.parse('{"common":{"appName":"LittleCrawler","version":"v1.0.0","login":"登录","logout":"退出登录","username":"用户名","password":"密码","submit":"提交","cancel":"取消","save":"保存","delete":"删除","edit":"编辑","search":"搜索","loading":"加载中...","success":"成功","error":"错误","confirm":"确认","clear":"清空","download":"下载","export":"导出","refresh":"刷新","start":"启动","stop":"停止","status":"状态","actions":"操作","settings":"设置","theme":"主题","language":"语言","dark":"深色","light":"浅色","chinese":"中文","english":"English","running":"运行中","connected":"实时连接","disconnected":"连接断开","dataOverview":"数据概览","totalData":"总数据","todayData":"今日新增","viewAll":"查看全部","openLink":"打开链接","copyright":"LittleCrawler \xa9 2025 - 多平台社交媒体爬虫框架","profile":"个人资料","publishNote":"发布笔记"},"nav":{"dashboard":"仪表盘","crawler":"爬虫管理","data":"数据管理","logs":"运行日志","settings":"系统设置"},"login":{"title":"欢迎使用 LittleCrawler","subtitle":"多平台社交媒体数据采集工具","placeholder":{"username":"请输入用户名","password":"请输入密码"},"error":{"required":"请输入用户名和密码","invalid":"用户名或密码错误"}},"dashboard":{"title":"系统概览","crawlerConfig":"爬虫配置","configDescription":"配置并启动爬虫任务","configDesc":"配置并启动爬虫任务","apiStatus":"API状态","healthy":"正常","unhealthy":"异常","platforms":"支持平台","currentUser":"当前用户","systemVersion":"系统版本","realtimeLogs":"实时日志","logsDesc":"查看爬虫运行状态","dataPreview":"数据预览","enableProxy":"代理","enableCdp":"CDP模式","advanced":"高级选项","dataStats":"数据统计","collectedData":"已采集的数据","latestData":"最新数据","latestRecords":"最近采集的10条记录"},"crawler":{"title":"爬虫配置","platform":"平台","crawlerType":"类型","loginType":"登录","keywords":"搜索关键词","keywordsPlaceholder":"多个用逗号分隔","startPage":"起始页码","maxPages":"最大页数","maxPagesPlaceholder":"留空为无限制","maxPagesDescription":"不填则爬取所有页面","maxPage":"最大页数","startCrawl":"开始爬取","stopCrawl":"停止爬取","enableProxy":"启用代理","cdpMode":"CDP 模式","types":{"search":"搜索","detail":"详情","creator":"创作者"},"loginTypes":{"qrcode":"扫码","phone":"手机","cookie":"Cookie"},"platforms":{"xhs":"小红书","zhihu":"知乎"},"status":{"idle":"空闲","running":"运行中","completed":"已完成","error":"出错"}},"publish":{"center":"发布中心","description":"发布笔记到各平台","xhs":"小红书","xhsDesc":"发布图文笔记","xhy":"小黄鱼","xhyDesc":"发布商品/笔记","zhihu":"知乎","zhihuDesc":"发布文章/回答","available":"可用","comingSoon":"待开发"},"data":{"title":"标题","saveFormat":"存储","fetchImages":"抓取图片","fetchComments":"抓取评论","fetchSubComments":"抓取子评论","headlessMode":"无头模式","dataList":"数据列表","noData":"暂无数据，启动爬虫开始采集","totalRecords":"共 {count} 条记录","records":"条记录","notes":"笔记","comments":"评论","author":"作者","type":"类型","likes":"点赞","exportJson":"导出 JSON","exportCsv":"导出 CSV","exportExcel":"导出 Excel","formats":{"csv":"CSV","json":"JSON","db":"MySQL","sqlite":"SQLite","mongodb":"MongoDB","excel":"Excel"},"columns":{"id":"ID","title":"标题","author":"作者","likes":"点赞","comments":"评论","createTime":"创建时间"}},"logs":{"title":"运行日志","displayCount":"显示条数","clearLogs":"清空日志","autoScroll":"自动滚动","connected":"已连接","disconnected":"已断开","reconnect":"重新连接","noLogs":"暂无日志","systemLog":"系统日志","entries":"条日志","waiting":"等待日志输出..."}}');let n={zh:l,en:JSON.parse('{"common":{"appName":"LittleCrawler","version":"v1.0.0","login":"Login","logout":"Logout","username":"Username","password":"Password","submit":"Submit","cancel":"Cancel","save":"Save","delete":"Delete","edit":"Edit","search":"Search","loading":"Loading...","success":"Success","error":"Error","confirm":"Confirm","clear":"Clear","download":"Download","export":"Export","refresh":"Refresh","start":"Start","stop":"Stop","status":"Status","actions":"Actions","settings":"Settings","theme":"Theme","language":"Language","dark":"Dark","light":"Light","chinese":"中文","english":"English","running":"Running","connected":"Connected","disconnected":"Disconnected","dataOverview":"Data Overview","totalData":"Total","todayData":"Today","viewAll":"View All","openLink":"Open Link","copyright":"LittleCrawler \xa9 2025 - Multi-platform Social Media Crawler","profile":"Profile","publishNote":"Publish Note"},"nav":{"dashboard":"Dashboard","crawler":"Crawler","data":"Data","logs":"Logs","settings":"Settings"},"login":{"title":"Welcome to LittleCrawler","subtitle":"Multi-platform Social Media Crawler","placeholder":{"username":"Enter username","password":"Enter password"},"error":{"required":"Please enter username and password","invalid":"Invalid username or password"}},"dashboard":{"title":"Overview","crawlerConfig":"Crawler Config","configDescription":"Configure and start crawler tasks","configDesc":"Configure and start crawler","apiStatus":"API Status","healthy":"Healthy","unhealthy":"Unhealthy","platforms":"Supported Platforms","currentUser":"Current User","systemVersion":"System Version","realtimeLogs":"Realtime Logs","logsDesc":"View crawler status","dataPreview":"Data Preview","enableProxy":"Proxy","enableCdp":"CDP Mode","advanced":"Advanced","dataStats":"Data Statistics","collectedData":"Collected data","latestData":"Latest Data","latestRecords":"Latest 10 records"},"crawler":{"title":"Crawler Settings","platform":"Platform","crawlerType":"Type","loginType":"Login","keywords":"Keywords","keywordsPlaceholder":"Separated by comma","startPage":"Start Page","maxPages":"Max Pages","maxPagesPlaceholder":"Empty for unlimited","maxPagesDescription":"Leave empty to crawl all pages","maxPage":"Max Pages","startCrawl":"Start Crawl","stopCrawl":"Stop Crawl","enableProxy":"Enable Proxy","cdpMode":"CDP Mode","types":{"search":"Search","detail":"Detail","creator":"Creator"},"loginTypes":{"qrcode":"QR Code","phone":"Phone","cookie":"Cookie"},"platforms":{"xhs":"Xiaohongshu","zhihu":"Zhihu"},"status":{"idle":"Idle","running":"Running","completed":"Completed","error":"Error"}},"publish":{"center":"Publish Center","description":"Publish notes to platforms","xhs":"Xiaohongshu","xhsDesc":"Publish image notes","xhy":"Xianyu","xhyDesc":"Publish products/notes","zhihu":"Zhihu","zhihuDesc":"Publish articles/answers","available":"Available","comingSoon":"Coming Soon"},"data":{"title":"Title","saveFormat":"Storage","fetchImages":"Fetch Images","fetchComments":"Fetch Comments","fetchSubComments":"Fetch Sub-Comments","headlessMode":"Headless Mode","dataList":"Data List","noData":"No data yet, start crawler to collect","totalRecords":"{count} records","records":"records","notes":"Notes","comments":"Comments","author":"Author","type":"Type","likes":"Likes","exportJson":"Export JSON","exportCsv":"Export CSV","exportExcel":"Export Excel","formats":{"csv":"CSV","json":"JSON","db":"MySQL","sqlite":"SQLite","mongodb":"MongoDB","excel":"Excel"},"columns":{"id":"ID","title":"Title","author":"Author","likes":"Likes","comments":"Comments","createTime":"Created At"}},"logs":{"title":"Runtime Logs","displayCount":"Display Count","clearLogs":"Clear Logs","autoScroll":"Auto Scroll","connected":"Connected","disconnected":"Disconnected","reconnect":"Reconnect","noLogs":"No logs yet","systemLog":"System Log","entries":"entries","waiting":"Waiting for logs..."}}')},i=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[s,o]=(0,r.useState)("zh"),[c,d]=(0,r.useState)(l);return(0,r.useEffect)(()=>{let e=localStorage.getItem("locale");e&&n[e]&&(o(e),d(n[e]))},[]),(0,a.jsx)(i.Provider,{value:{locale:s,messages:c,setLocale:e=>{o(e),d(n[e]),localStorage.setItem("locale",e)},t:(e,t)=>{var s,a;return a=null!==(s=e.split(".").reduce((e,t)=>null==e?void 0:e[t],c))&&void 0!==s?s:e,t?a.replace(/\{(\w+)\}/g,(e,s)=>{var a;return String(null!==(a=t[s])&&void 0!==a?a:"{".concat(s,"}"))}):a}},children:t})}function c(){let e=(0,r.useContext)(i);if(!e)throw Error("useI18n must be used within I18nProvider");return e}},1837:function(e,t,s){"use strict";s.d(t,{BQ:function(){return r},Bl:function(){return o},Z9:function(){return i},iJ:function(){return n},oD:function(){return c}});let a=()=>window.location.origin,r=()=>{{let e="https:"===window.location.protocol?"wss:":"ws:";return"".concat(e,"//").concat(window.location.host)}};async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0,r={"Content-Type":"application/json",...t.headers};s&&(r.Authorization="Bearer ".concat(s));let l=await fetch("".concat(a()).concat(e),{...t,headers:r});if(!l.ok)throw Error((await l.json().catch(()=>({detail:"Unknown error"}))).detail||"HTTP ".concat(l.status));return l.json()}let n={login:e=>l("/api/auth/login",{method:"POST",body:JSON.stringify(e)}),getCurrentUser:e=>l("/api/auth/me",{},e),logout:e=>l("/api/auth/logout",{method:"POST"},e)},i={getStatus:e=>l("/api/crawler/status",{},e),start:(e,t)=>l("/api/crawler/start",{method:"POST",body:JSON.stringify(t)},e),stop:e=>l("/api/crawler/stop",{method:"POST"},e),getPlatforms:e=>l("/api/crawler/platforms",{},e)},o={getFiles:(e,t,s)=>{let a=new URLSearchParams;t&&a.append("platform",t),s&&a.append("file_type",s);let r=a.toString();return l("/api/data/files".concat(r?"?".concat(r):""),{},e)},getFileContent:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return l("/api/data/files/".concat(encodeURIComponent(t),"?preview=true&limit=").concat(s),{},e)},export:(e,t,s)=>fetch("".concat(a(),"/api/data/").concat(t,"/export?format=").concat(s),{headers:{Authorization:"Bearer ".concat(e)}}).then(e=>e.blob()),delete:(e,t,s)=>l("/api/data/".concat(t,"/").concat(s),{method:"DELETE"},e)},c={getStatus:e=>l("/api/publisher/status",{},e),searchTopic:function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return l("/api/publisher/topic/search",{method:"POST",body:JSON.stringify({keyword:t,page:s,page_size:20})},e)},uploadImage:async(e,t)=>{let s=new FormData;s.append("file",t);let r=await fetch("".concat(a(),"/api/publisher/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:s});if(!r.ok)throw Error((await r.json().catch(()=>({detail:"Upload failed"}))).detail||"HTTP ".concat(r.status));return r.json()},deleteImage:(e,t)=>l("/api/publisher/upload/".concat(encodeURIComponent(t)),{method:"DELETE"},e),publishNote:(e,t)=>l("/api/publisher/publish",{method:"POST",body:JSON.stringify(t)},e)}}},function(e){e.O(0,[69,192,354,500,202,971,117,744],function(){return e(e.s=5877)}),_N_E=e.O()}]);